%% beamerthemeprg.sty
%% Copyright 2020 Yusuke Izawa
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
% http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainer of this work is Damien Cassou.
%
% This theme is inspired by `beamerthemephiswa.sty' created by Damien Cassou.
%
% This code is derived from the work of Till Tantau on beamer

\ProvidesPackage{beamerthemeprg}

\mode<presentation>

\RequirePackage{xcolor}

% Some images

\logo{%
  \scalebox{.15}{%
    \input{titech.pdf_tex}%
  }}

% Color: prg

\usepackage{xcolor}
\definecolor{royalblue(traditional)}{rgb}{0.0, 0.14, 0.4}

\setbeamercolor{frametitle}{fg=royalblue(traditional)}
\setbeamercolor{section in head/foot}{bg=royalblue(traditional)}
\setbeamercolor{title}{fg=royalblue(traditional)}
\setbeamercolor{author in head/foot}{bg=royalblue(traditional)}
\setbeamercolor{date in head/foot}{fg=royalblue(traditional)}

\setbeamercolor{section in toc}{fg=royalblue(traditional)}
\setbeamercolor{subsection in toc}{fg=royalblue(traditional)}
\setbeamercolor{subsubsection in toc}{fg=royalblue(traditional)}

\setbeamercolor{itemize item}{fg=royalblue(traditional)}
\setbeamercolor{itemize subitem}{fg=royalblue(traditional)}
\setbeamercolor{itemize subsubitem}{fg=royalblue(traditional)}
\setbeamertemplate{itemize items}[circle]

% Header and footer: prg

\setbeamercolor*{author in head/foot}{fg=royalblue(traditional)}
\setbeamercolor*{title in head/foot}{fg=royalblue(traditional)}
\setbeamercolor*{date in head/foot}{fg=royalblue(traditional)}
\setbeamercolor*{section in head/foot}{fg=royalblue(traditional)}
\setbeamercolor*{subsection in head/foot}{fg=royalblue(traditional)}

\defbeamertemplate*{footline}{prg theme}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.7\paperwidth,ht=2.25ex,dp=1ex,left,leftskip=1ex]{author in head/foot}%
    \usebeamerfont{author in head/foot}Programming Research Group (http://prg.is.titech.ac.jp) 2014--present
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.3\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
    \usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
    \insertframenumber{} / \inserttotalframenumber\hspace*{2ex}
  \end{beamercolorbox}}%
  \vskip0pt%
}

\defbeamertemplate*{headline}{prg theme}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[ht=2.25ex,dp=1ex,left,leftskip=1ex]{title in head/foot}%
    \usebeamerfont{title in head/foot}\insertshorttitle
    \ifx\insertsectionhead\@empty%
    \else%
    {\usebeamerfont{section in head/foot}\hskip.5ex$\blacktriangleright$\hskip.5ex}%
    \fi%
    \usebeamerfont{section in head/foot}\insertsectionhead
    \ifx\insertsubsectionhead\@empty%
    \else%
    {\usebeamerfont{subsection in head/foot}\hskip.5ex$\blacktriangleright$\hskip.5ex}%
    \fi%
    \usebeamerfont{subsection in head/foot}\insertsubsectionhead
  \end{beamercolorbox}}%
  \vskip0pt%
}

\defbeamertemplate*{sidebar right}{prg}
{
  \vspace{-3ex}
  \llap{\insertlogo\hskip0.1cm}%
}

\setbeamersize{text margin left=1em,text margin right=1em}


% Title page: prg

\defbeamertemplate*{title page}{prg}[1][]
{
  \vbox{}
  \vfill
  \begin{centering}
    % \begin{beamercolorbox}[right]{logo}
    %   \insertlogo%
    % \end{beamercolorbox}%
    \vskip3em\par
    \begin{beamercolorbox}[sep=8pt,center,#1]{title}
      \usebeamerfont{title}\inserttitle\par%
      \ifx\insertsubtitle\@empty%
      \else%
        \vskip0.25em%
        {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
      \fi%
    \end{beamercolorbox}%
    \vskip1em\par
    \begin{beamercolorbox}[sep=8pt,center,#1]{author}
      \usebeamerfont{author}\insertauthor
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=8pt,center,#1]{institute}
      \usebeamerfont{institute}\insertinstitute
    \end{beamercolorbox}
    \begin{beamercolorbox}[sep=8pt,center,#1]{date}
      \usebeamerfont{date}\insertdate
    \end{beamercolorbox}\vskip0.5em
    {\usebeamercolor[fg]{titlegraphic}\inserttitlegraphic\par}
  \end{centering}
  \vfill
}

% Part page: prg

\defbeamertemplate*{part page}{prg}[1][]
{
  \begin{centering}
    {\usebeamerfont{part name}\usebeamercolor[fg]{part name}\partname~\insertromanpartnumber}
    \vskip1em\par
    \begin{beamercolorbox}[sep=8pt,center,#1]{part title}
      \usebeamerfont{part title}\insertpart\par
    \end{beamercolorbox}
  \end{centering}
}

% Itemize items, prg

\defbeamertemplate*{itemize item}{prg}{\scriptsize\raise1.25pt\hbox{\donotcoloroutermaths$\bullet$}}
\defbeamertemplate*{itemize subitem}{prg}{\tiny\raise1.5pt\hbox{\donotcoloroutermaths$-$}}
\defbeamertemplate*{itemize subsubitem}{prg}{\tiny\raise1.5pt\hbox{\donotcoloroutermaths$\bullet$}}

\defbeamertemplate*{enumerate item}{prg}{\insertenumlabel.}
\defbeamertemplate*{enumerate subitem}{prg}{\insertenumlabel.\insertsubenumlabel}
\defbeamertemplate*{enumerate subsubitem}{prg}{\insertenumlabel.\insertsubenumlabel.\insertsubsubenumlabel}
\defbeamertemplate*{enumerate mini template}{prg}{\insertenumlabel}

% Description item width

\defbeamertemplate*{description item}{prg}{\insertdescriptionitem}

% Itemize/Enumerate body

\defbeamertemplate*{itemize/enumerate body begin}{prg}{}
\defbeamertemplate*{itemize/enumerate body end}{prg}{}

\defbeamertemplate*{itemize/enumerate subbody begin}{prg}{}
\defbeamertemplate*{itemize/enumerate subbody end}{prg}{}

\defbeamertemplate*{itemize/enumerate subsubbody begin}{prg}{}
\defbeamertemplate*{itemize/enumerate subsubbody end}{prg}{}

% Blocks

\defbeamertemplate*{block begin}{prg}
{
  \par\vskip\medskipamount%
  \begin{beamercolorbox}[colsep*=.75ex]{block title}
    \usebeamerfont*{block title}\insertblocktitle%
  \end{beamercolorbox}%
  {\parskip0pt\par}%
  \ifbeamercolorempty[bg]{block title}
  {}
  {\ifbeamercolorempty[bg]{block body}{}{\nointerlineskip\vskip-0.5pt}}%
  \usebeamerfont{block body}%
  \begin{beamercolorbox}[colsep*=.75ex,vmode]{block body}%
    \ifbeamercolorempty[bg]{block body}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
}
\defbeamertemplate*{block end}{prg}
{\end{beamercolorbox}\vskip\smallskipamount}

\defbeamertemplate*{block alerted begin}{prg}
{
  \par\vskip\medskipamount%
  \begin{beamercolorbox}[colsep*=.75ex]{block title alerted}
    \usebeamerfont*{block title alerted}\insertblocktitle%
  \end{beamercolorbox}%
  {\parskip0pt\par}%
  \ifbeamercolorempty[bg]{block title alerted}
  {}
  {\ifbeamercolorempty[bg]{block body alerted}{}{\nointerlineskip\vskip-0.5pt}}%
  \usebeamerfont{block body alerted}%
  \begin{beamercolorbox}[colsep*=.75ex,vmode]{block body alerted}%
    \ifbeamercolorempty[bg]{block body alerted}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
}

\defbeamertemplate*{block alerted end}{prg}
{\end{beamercolorbox}\vskip\smallskipamount}


\defbeamertemplate*{block example begin}{prg}
{
  \par\vskip\medskipamount%
  \begin{beamercolorbox}[colsep*=.75ex]{block title example}
    \usebeamerfont*{block title example}\insertblocktitle%
  \end{beamercolorbox}%
  {\parskip0pt\par}%
  \ifbeamercolorempty[bg]{block title example}
  {}
  {\ifbeamercolorempty[bg]{block body example}{}{\nointerlineskip\vskip-0.5pt}}%
  \usebeamerfont{block body example}%
  \begin{beamercolorbox}[colsep*=.75ex,vmode]{block body example}%
    \ifbeamercolorempty[bg]{block body example}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
}
\defbeamertemplate*{block example end}{prg}
{\end{beamercolorbox}\vskip\smallskipamount}


% Theorems

\defbeamertemplate*{theorem begin}{prg}
{%
  \begin{\inserttheoremblockenv}
  {%
    \inserttheoremname
    \ifx\inserttheoremaddition\@empty\else\ (\inserttheoremaddition)\fi%
  }%
}

\defbeamertemplate*{theorem end}{prg}
{\end{\inserttheoremblockenv}}


% Proofs

\defbeamertemplate*{proof begin}{prg}
{\begin{block}{\insertproofname}}

\defbeamertemplate*{proof end}{prg}
{\end{block}}

\defbeamertemplate*{qed symbol}{prg}
{\openbox}

\mode<all>