%% beamerouterthemeprg.sty
%% Copyright 2020 Yusuke Izawa
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
% http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainer of this work is Damien Cassou.
%
% This theme is inspired by `beamerthemephiswa.sty' created by Damien Cassou.
%
% This code is derived from the work of Till Tantau on beamer

\ProvidesPackage{beamerouterthemeprg}

\mode<presentation>

\newif\ifbeamer@prg@bigpagenumber
\beamer@prg@bigpagenumberfalse
\DeclareOptionBeamer{bigpagenumber}{\beamer@prg@bigpagenumbertrue}

\newif\ifbeamer@prg@topline
\beamer@prg@toplinefalse
\DeclareOptionBeamer{topline}{\beamer@prg@toplinetrue}

\ProcessOptionsBeamer

\setbeamercolor*{author in head/foot}{parent=palette tertiary}
\setbeamercolor*{title in head/foot}{parent=palette secondary}
\setbeamercolor*{date in head/foot}{parent=palette primary}

\setbeamercolor*{section in head/foot}{parent=palette tertiary}
\setbeamercolor*{subsection in head/foot}{parent=palette primary}

\RequirePackage{tikz}

\defbeamertemplate*{footline}{prg theme}
{
  \ifbeamer@prg@bigpagenumber
  \hbox{
  \begin{beamercolorbox}[wd=.7\paperwidth,ht=2.25ex,dp=1ex,left,leftskip=1ex]{author
      in head/foot}%
    \leavevmode%
    \ifbeamer@prg@topline
    \else
    \usebeamerfont{title in head/foot}\insertshorttitle{}\hspace*{2em}
    \fi
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.215\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
    \leavevmode%
    \insertshortdate{}\hspace*{2em}
  \end{beamercolorbox}}%
  \begin{tikzpicture}[overlay]
    \draw[fill=beamer@royalblue] (\paperwidth-5ex,3.625ex) circle (6ex);
    \draw[fill=white] (\paperwidth-5ex,3.625ex) circle (5ex);
    \node at (\paperwidth-5ex,4ex) {\small$^\text{\insertframenumber}/_\text{\inserttotalframenumber}$};
  \end{tikzpicture}%
  \else
  \leavevmode%
   \hbox{%
   \begin{beamercolorbox}[wd=.7\paperwidth,ht=2.25ex,dp=1ex,left,leftskip=1.75ex]{author
       in head/foot}%
    \usebeamerfont{title in head/foot}\insertshorttitle{}\hspace*{2em}
   \end{beamercolorbox}%
   \begin{beamercolorbox}[wd=.3\paperwidth,ht=2.25ex,dp=1ex,right]{date in head/foot}%
     \usebeamerfont{date in head/foot}\insertshortdate{}\hspace*{2em}
     \insertframenumber{} / \inserttotalframenumber\hspace*{2ex}
   \end{beamercolorbox}}%
   \vskip0pt%
  \fi

}

\defbeamertemplate*{headline}{prg theme}
{
  % \ifbeamer@prg@topline
  % \leavevmode%
  %   \hbox{%
  %   \begin{beamercolorbox}[ht=2.25ex,dp=1ex,left,leftskip=1ex]{framelike}%
  %     \usebeamerfont{title in head/foot}\insertshorttitle
  %     \ifx\insertsectionhead\@empty%
  %     \else%
  %     {\usebeamerfont{section in head/foot}\hskip.5ex$\blacktriangleright$\hskip.5ex}%
  %     \fi%
  %     \usebeamerfont{section in head/foot}\insertsectionhead
  %     \ifx\insertsubsectionhead\@empty%
  %     \else%
  %     {\usebeamerfont{subsection in head/foot}\hskip.5ex$\blacktriangleright$\hskip.5ex}%
  %     \fi%
  %     \usebeamerfont{subsection in head/foot}\insertsubsectionhead
  %   \end{beamercolorbox}}%
  %   \vskip-1pt%
  % \fi
}

\defbeamertemplate*{sidebar right}{prg theme}
{
  % \vspace{-3ex}
  % \llap{\insertlogo\hskip0.1cm}%
}

\setbeamersize{text margin left=1em,text margin right=1em}

\mode
<all>
